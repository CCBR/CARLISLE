<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=CCBR><link rel="shortcut icon" href=../../img/favicon.ico><title>3. Running the Pipeline - CARLISLE</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../../css/custom.css rel=stylesheet><link href=../../css/version-select.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "3. Running the Pipeline";
        var mkdocs_page_input_path = "user-guide/run.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> CARLISLE </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>Home</a> </li> </ul> <p class=caption><span class=caption-text>Usage</span></p> <ul class=current> <li class=toctree-l1><a href=../getting-started/ class="reference internal">1. Getting Started</a> </li> <li class=toctree-l1><a href=../preparing-files/ class="reference internal">2. Preparing Files</a> </li> <li class="toctree-l1 current"><a class="reference internal current" href=#>3. Running the Pipeline</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#pipeline-overview>Pipeline Overview</a> <ul> <li class=toctree-l3><a class="reference internal" href=#required-arguments>Required arguments</a> </li> <li class=toctree-l3><a class="reference internal" href=#optional-arguments>Optional arguments</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#commands-explained>Commands explained</a> </li> <li class=toctree-l2><a class="reference internal" href=#typical-workflow>Typical Workflow</a> </li> </ul> </li> <li class=toctree-l1><a href=../output/ class="reference internal">4. Expected Output</a> </li> <li class=toctree-l1><a href=../test-info/ class="reference internal">5. Running Test Data</a> </li> </ul> <p class=caption><span class=caption-text>FAQ</span></p> <ul> <li class=toctree-l1><a href=../troubleshooting/ class="reference internal">Troubleshooting</a> </li> <li class=toctree-l1><a href=../contributions/ class="reference internal">Contributions</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>CARLISLE</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Usage</li> <li class="breadcrumb-item active">3. Running the Pipeline</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/CCBR/CARLISLE/edit/main/docs/user-guide/run.md>Edit on CCBR/CARLISLE</a> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=running-the-pipeline>Running the Pipeline<a class=headerlink href=#running-the-pipeline title="Permanent link">&para;</a></h1> <h2 id=pipeline-overview>Pipeline Overview<a class=headerlink href=#pipeline-overview title="Permanent link">&para;</a></h2> <p>The Snakemake workflow has a multiple options</p> <h3 id=required-arguments>Required arguments<a class=headerlink href=#required-arguments title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>Usage: carlisle -m/--runmode=&lt;RUNMODE&gt; -w/--workdir=&lt;WORKDIR&gt;

1.  RUNMODE: [Type: String] Valid options:
    *) init : initialize workdir
    *) run : run with slurm
    *) reset : DELETE workdir dir and re-init it
    *) dryrun : dry run snakemake to generate DAG
    *) unlock : unlock workdir if locked by snakemake
    *) runlocal : run without submitting to sbatch
    *) runtest: run on cluster with included test dataset
2.  WORKDIR: [Type: String]: Absolute or relative path to the output folder with write permissions.
</code></pre></div> <h3 id=optional-arguments>Optional arguments<a class=headerlink href=#optional-arguments title="Permanent link">&para;</a></h3> <p>--help|-h : print this help. --version|-v : print the version of carlisle. --force|-f : use the force flag for snakemake to force all rules to run. --singcache|-c : singularity cache directory. Default is <code>/data/${USER}/.singularity</code> if available, or falls back to <code>${WORKDIR}/.singularity</code>. Use this flag to specify a different singularity cache directory.</p> <h2 id=commands-explained>Commands explained<a class=headerlink href=#commands-explained title="Permanent link">&para;</a></h2> <p>The following explains each of the command options:</p> <ul> <li>Preparation Commands</li> <li>init (REQUIRED): This must be performed before any Snakemake run (dry, local, cluster) can be performed. This will copy the necessary config, manifest and Snakefiles needed to run the pipeline to the provided output directory.<ul> <li>the -f/--force flag can be used in order to re-initialize a workdir that has already been created</li> </ul> </li> <li>dryrun (OPTIONAL): This is an optional step, to be performed before any Snakemake run (local, cluster). This will check for errors within the pipeline, and ensure that you have read/write access to the files needed to run the full pipeline.</li> <li>Processing Commands</li> <li>local: This will run the pipeline on a local node. NOTE: This should only be performed on an interactive node.</li> <li>run: This will submit a master job to the cluster, and subsequent sub-jobs as needed to complete the workflow. An email will be sent when the pipeline begins, if there are any errors, and when it completes.</li> <li>Other Commands (All optional)</li> <li>unlock: This will unlock the pipeline if an error caused it to stop in the middle of a run.</li> <li>runtest: This will run a test of the pipeline with test data</li> </ul> <p>To run any of these commands, follow the the syntax:</p> <div class=highlight><pre><span></span><code>carlisle --runmode=COMMAND --workdir=/path/to/output/dir
</code></pre></div> <h2 id=typical-workflow>Typical Workflow<a class=headerlink href=#typical-workflow title="Permanent link">&para;</a></h2> <p>A typical command workflow, running on the cluster, is as follows:</p> <div class=highlight><pre><span></span><code>carlisle --runmode=init --workdir=/path/to/output/dir

carlisle --runmode=dryrun --workdir=/path/to/output/dir

carlisle --runmode=run --workdir=/path/to/output/dir
</code></pre></div> </div> </div><script async src="https://www.googletagmanager.com/gtag/js?id=G-D3SL9V30KL"></script> <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-D3SL9V30KL'); // Replace with your tracking ID
</script> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span> <a href=https://github.com/CCBR/CARLISLE class="fa fa-code-fork" style="color: #fcfcfc"> CCBR/CARLISLE</a> </span> <span><a href=../preparing-files/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../output/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../js/custom.js></script> <script src=../../search/main.js></script> <script src=../../js/version-select.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 